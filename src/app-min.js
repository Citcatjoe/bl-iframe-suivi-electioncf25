import{getFirestore,collection,addDoc,setDoc,doc,updateDoc,deleteField,deleteDoc,getDoc,getDocs,onSnapshot}from"firebase/firestore";import"./style.scss";import javascriptLogo from"./javascript.svg";import viteLogo from"/vite.svg";import{setupCounter}from"./counter.js";import"./components/AmberBox.js";import"./components/TitleWidget.js";const db=getFirestore(),collectionRef="questions",dbRef=collection(db,"questions");console.log(window.location.origin);var docRef="";const urlParams=new URLSearchParams(window.location.search),calendarDoc=urlParams.get("calendarDoc");calendarDoc?docRef=calendarDoc:alert("No calendar found.");let calendar={};const getCalendarOnce=async()=>{try{if(!docRef)return void console.error("Erreur : docRef est vide.");const e=doc(db,"questions",docRef),t=await getDoc(e);t.exists()?(calendar=t.data(),console.log(calendar),showCalendar(calendar)):console.log("Aucune question trouvée")}catch(e){console.error("Erreur lors de la récupération de la question :",e)}};getCalendarOnce();const showCalendar=e=>{document.querySelector("#app").innerHTML="";let t="";t=`\n          <title-widget>\n            ${e.calName} \n          </title-widget>\n          <div id="body">\n            <ul>\n      `;[...e.dates].sort(((e,t)=>e.date.localeCompare(t.date))).forEach((e=>{const o=e.date.split("-"),a=o[2],n=["JAN","FÉV","MAR","AVR","MAI","JUN","JUL","AOÛ","SEP","OCT","NOV","DÉC"][parseInt(o[1])-1];t+=`\n              <li class="flex items-center relative px-1.5 py-1.5">\n                <div class="event-date relative w-10 h-10 text-center font-blickb bg-white rounded mr-5">\n                  <span class="event-date-day absolute left-1/2 -translate-x-1/2 text-center text-xl">${a}</span><br>\n                  <span class="event-date-month absolute left-1/2 -translate-x-1/2 text-xs">${n}</span>\n                </div>\n                <span class="font-blickb text-sm">${e.event}</span>\n              </li>`})),t+='</ul><span id="see-all" class="font-i text-sm block w-full py-3 opacity-70">Tout voir</span></div>',document.querySelector("#app").innerHTML+=t};